#%Module

proc ModulesHelp { } {
    puts stderr {   Intel Math Kernel Library is a library of highly optimized, extensively threaded math routines
for science, engineering, and financial applications that require maximum performance. Core math functions include
BLAS, LAPACK, ScaLAPACK, Sparse Solvers, Fast Fourier Transforms, Vector Math, and more. - Homepage: http://software.intel.com/en-us/intel-mkl/
    }
}

module-whatis {Description: Intel Math Kernel Library is a library of highly optimized, extensively threaded math routines
for science, engineering, and financial applications that require maximum performance. Core math functions include
BLAS, LAPACK, ScaLAPACK, Sparse Solvers, Fast Fourier Transforms, Vector Math, and more. - Homepage: http://software.intel.com/en-us/intel-mkl/}

set root    /share/easybuild/RHEL6.3/sandybridge/software/imkl/11.0.4.183-OpenMPI-1.6.5

conflict    imkl

if { ![is-loaded icc/2013.4.183] } {
    module load icc/2013.4.183
}

if { ![is-loaded ifort/2013.4.183] } {
    module load ifort/2013.4.183
}

if { ![is-loaded OpenMPI/1.6.5-iccifort-2013.4.183] } {
    module load OpenMPI/1.6.5-iccifort-2013.4.183
}

prepend-path	CPATH		$root/mkl/include
prepend-path	CPATH		$root/mkl/include/fftw
prepend-path	FPATH		$root/mkl/include
prepend-path	FPATH		$root/mkl/include/fftw
prepend-path	LD_LIBRARY_PATH		$root/mkl/lib/intel64
prepend-path	LIBRARY_PATH		$root/mkl/lib/intel64
prepend-path	PATH		$root/bin
prepend-path	PATH		$root/mkl/bin
prepend-path	PATH		$root/mkl/bin/intel64

setenv	EBROOTIMKL		"$root"
setenv	EBVERSIONIMKL		"11.0.4.183"
setenv	EBDEVELIMKL		"$root/easybuild/imkl-11.0.4.183-OpenMPI-1.6.5-easybuild-devel"

prepend-path	INTEL_LICENSE_FILE		/share/apps/intel/licenses/license.lic
prepend-path	NLSPATH		$root/idb/intel64/locale/%l_%t/%N
setenv	MKLROOT		$root

# Built with EasyBuild version 1.13.0
